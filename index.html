<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lewis University — Virtual Campus Tour</title>

  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-sA+e2kXk0f4qG9j0Z4k8jQeT9p6f2bYh6G1d8v+0z6M="
    crossorigin=""
  />

  <style>
    :root{
      --accent:#b71c1c;
      --muted:#f5f5f5;
      --glass: rgba(255,255,255,0.85);
    }
    html,body,#map{ height:100%; margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; }
    .app {
      display:grid;
      grid-template-columns: 320px 1fr;
      height:100vh;
    }

    .sidebar {
      background: linear-gradient(180deg,var(--glass),#ffffff);
      padding:18px;
      box-shadow: 2px 0 8px rgba(0,0,0,0.08);
      overflow:auto;
    }
    .brand {
      display:flex; gap:12px; align-items:center; margin-bottom:14px;
    }
    .logo {
      width:48px; height:48px; background:var(--accent); border-radius:6px;
      color:white; display:flex; align-items:center; justify-content:center; font-weight:700;
    }
    h1 { font-size:18px; margin:0; }
    p.lead { margin:6px 0 12px; color:#333; font-size:13px; }

    .search {
      display:flex; margin-bottom:12px;
    }
    .search input{ flex:1; padding:8px; border-radius:6px; border:1px solid #ddd; }
    .list { display:flex; flex-direction:column; gap:8px; }
    .card {
      background:var(--muted); padding:10px; border-radius:8px; cursor:pointer;
      display:flex; justify-content:space-between; align-items:center; gap:8px;
      border:1px solid transparent;
    }
    .card:focus, .card:hover { outline:none; border-color:rgba(0,0,0,0.08); box-shadow: 0 1px 6px rgba(0,0,0,0.04); }
    .card .name { font-weight:600; font-size:14px; }
    .card .meta { font-size:12px; color:#555; }

    .footer {
      margin-top:14px; font-size:12px; color:#555;
    }

    @media (max-width:900px){
      .app { grid-template-columns: 1fr; grid-template-rows: auto 1fr; }
      .sidebar{ position:relative; z-index:400; display:flex; flex-wrap:wrap; }
    }
    .leaflet-control-container { z-index:500; }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Lewis University virtual campus tour">
    <aside class="sidebar" aria-label="Campus controls">
      <div class="brand">
        <div class="logo" aria-hidden="true">LU</div>
        <div>
          <h1>Lewis University — Virtual Tour</h1>
          <p class="lead">Explore the Romeoville campus. Click a building or use the list.</p>
        </div>
      </div>

      <div class="search" role="search" aria-label="Search buildings">
        <input id="filter" placeholder="Filter buildings..." aria-label="Filter buildings" />
      </div>

      <div class="list" id="placesList" role="list" aria-label="Campus places">
      </div>

      <div class="footer">
        <p><strong>Coordinates:</strong> 41.605327, -88.075303. Source: Lewis University / campus map.</p>
        <p style="margin-top:6px;">This demo uses OpenStreetMap tiles (Leaflet). For full campus map and details see Lewis University website.</p>
        <p style="font-size:11px; color:#666; margin-top:8px;">(This is a demo for a class project — expand with photos, 360 scenes, or student audio guides.)</p>
      </div>
    </aside>

    <main id="map" role="region" aria-label="Interactive campus map"></main>
  </div>

  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-o9N1j7k+4t0p2Gm8Qxgq0wX0p2bK4p6t2mG3H0+gT8M="
    crossorigin=""
  ></script>

  <script>
 
    const CAMPUS_CENTER = [41.605327, -88.075303];

    const PLACES = [
      {
        id: 'lrc',
        name: 'Brother Paul French Learning Resource Center (LRC)',
        coords: [41.6060, -88.0755],
        desc: 'Library, student services, and academic resources. See the LRC for hours and services.'
      },
      {
        id: 'founders',
        name: 'Founders Hall (Residence)',
        coords: [41.6046, -88.0750],
        desc: 'First-year residence hall — renovated with modern amenities.'
      },
      {
        id: 'aviation',
        name: 'Aviation Building & Hangar',
        coords: [41.6068, -88.0800],
        desc: 'Home to aviation programs and hangar facilities.'
      },
      {
        id: 'athletics',
        name: 'Athletics Complex / Baseball Field',
        coords: [41.6049, -88.0735],
        desc: 'Athletic fields and sports facilities for Flyer teams.'
      },
      {
        id: 'academic_science',
        name: 'Academic Science Center (AS)',
        coords: [41.6059, -88.0764],
        desc: 'Science labs, VR lab, cadaver lab, and related departments.'
      }
    ];

    const map = L.map('map', {
      center: CAMPUS_CENTER,
      zoom: 16,
      minZoom: 14,
      maxZoom: 19,
      zoomControl: true,
      attributionControl: false
    });

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: 'Map data © <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
    }).addTo(map);

    L.circleMarker(CAMPUS_CENTER, { radius:6, color:'#b71c1c', fill:true, fillOpacity:0.9 }).addTo(map)
      .bindTooltip('Lewis University (approx. center)', {permanent:false});

    const icon = L.divIcon({
      className: 'custom-marker',
      html: '<svg width="18" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 2C8.1 2 5 5.1 5 9c0 5.2 6.4 11.4 6.7 11.7.2.2.5.3.8.3s.6-.1.8-.3C12.6 20.4 19 14.2 19 9c0-3.9-3.1-7-7-7z" fill="#b71c1c"/></svg>',
      iconSize: [18,24],
      iconAnchor: [9,24]
    });

    const markers = {};

    function createPlaceCard(place) {
      const div = document.createElement('button');
      div.className = 'card';
      div.setAttribute('role','listitem');
      div.setAttribute('tabindex','0');
      div.dataset.id = place.id;

      div.innerHTML = `<div>
                        <div class="name">${place.name}</div>
                        <div class="meta">${(place.desc || '').slice(0,70)}</div>
                      </div>
                      <div aria-hidden="true">➡</div>`;

      div.addEventListener('click', () => {
        focusPlace(place.id);
      });
      div.addEventListener('keydown', (ev) => {
        if (ev.key === 'Enter' || ev.key === ' ') {
          ev.preventDefault(); focusPlace(place.id);
        }
      });

      return div;
    }

    const listEl = document.getElementById('placesList');

    PLACES.forEach((p) => {
      const m = L.marker(p.coords, { icon }).addTo(map)
        .bindPopup(`<strong>${p.name}</strong><p style="margin:6px 0 0;">${p.desc}</p>
                    <p style="margin:6px 0 0;"><a href="https://www.lewisu.edu/campusmap/" target="_blank" rel="noopener">More campus map info</a></p>`,
                  { minWidth:200 });

      markers[p.id] = m;

      m.bindTooltip(p.name, {permanent:false, direction:'top'});

      listEl.appendChild(createPlaceCard(p));
    });

    function focusPlace(id) {
      const place = PLACES.find(x => x.id === id);
      if (!place) return;
      const m = markers[id];
      if (!m) return;
      map.flyTo(place.coords, 18, { duration: 1.0 });
      setTimeout(() => m.openPopup(), 1000);
    }

    const filterInput = document.getElementById('filter');
    filterInput.addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      Array.from(listEl.children).forEach(card => {
        const match = card.querySelector('.name').textContent.toLowerCase().includes(q);
        card.style.display = match ? '' : 'none';
      });
    });

    window.addEventListener('keydown', (ev) => {
      if (ev.key >= '1' && ev.key <= String(PLACES.length)) {
        const idx = Number(ev.key) - 1;
        focusPlace(PLACES[idx].id);
      }
    });

    function handleDeepLink() {
      const params = new URLSearchParams(location.search);
      const placeId = params.get('place');
      if (placeId) {
        const found = PLACES.find(p => p.id === placeId);
        if (found) focusPlace(placeId);
      }
    }
    handleDeepLink();

  </script>
</body>
</html>


